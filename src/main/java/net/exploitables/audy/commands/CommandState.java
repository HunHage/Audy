/*
 * This file is a part of https://github.com/HunHage/Audy, also known as Audy
 *
 * Audy is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.
 * To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/ or send a letter to
 * Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * Audy is provided without any warranty, including any implied warranty.
 */

package net.exploitables.audy.commands;

/**
 * Command Execution status referenced after command completed normally or with an exception.
 * This is referenced to determine how to respond to the calling user.
 */
public enum CommandState {
    // Command execution failed with a message. Send it.
    FAILED(false, true, "The command failed to complete with the following message: `{0}`"),
    // Command execution failed in an expected way, send response as if it were successful
    FAILED_EXPECTED(true, false, null),
    // Command execution succeeded, send the message in the CommandResponse.
    SUCCESS(true, false, null),
    // Command execution succeeded, don't send the message in the CommandResponse.
    SUCCESS_NO_SEND(false, false, null),
    // Command encountered an exception, send a message with the exception name/message.
    ERROR(false, true, "The command encountered an internal error with the following message: `{0}`"),
    // Command otherwise executed improperly and didn't set it's state. Send a message.
    UNKNOWN(false, true, "The command ran improperly. `{0}`");

    boolean respond;
    boolean error;
    String statement;
    CommandState(boolean respond, boolean error, String statement) {
        this.respond = respond;
        this.error = error;
        this.statement = statement;
    }

    /**
     * @return true if a message should be returned containing the contents of CommandResponse
     */
    public boolean shouldRespond() {
        return respond;
    }

    /**
     * @return true if the command encountered an error or executed improperly AND should respond with an error message
     */
    public boolean notifyError() {
        return error;
    }

    /**
     * @return the message to send to the Calling User if the command failed,
     *  should have the '{0}' replaced with a message
     */
    public String getStatement() {
        return statement;
    }
}
